<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz App</title>
</head>

<body>


  <script>
    // Sample quiz data - you can modify these questions
    

    // YOUR JAVASCRIPT CODE GOES HERE
    // Goal: Make the quiz functional!
    // 
    // Steps to get you started:
    // 1. Display the first question and its answers -done
    // 2. When user clicks an answer, check if it's correct - done
    // 3. Show feedback (green for correct, red for wrong) -- doone
    // 4. Show the "Next Question" button - done
    // 5. Move to the next question when clicked - done
    // 6. At the end, show the final score - done
    // 7. Allow restart - done

    // Hints:
    // - Track current question index (starts at 0)
    // - Track the score
    // - Create a function to display a question
    // - Create a function to check the answer
    // - Create a function to show the results

    // START CODING HERE!

    // 1. Display the first question and its answers

    const questionArea = document.getElementById('question');
    const answersArea = document.getElementById('answers');
    let progress = document.getElementById('progress')
    let quizContainer = document.getElementById('quiz');
    let scoreContainer = document.getElementById('score-container');
    const Next = document.getElementById('next-btn');
    const lquiz = quizData.length;
    let score = 0;
    let i = 0;

    window.onload = function () {
      while (i === 0) {

        console.log('i is ', i)
        let quizQues = quizData[i].question;
        let quizStr = quizQues.toString();
        questionArea.innerHTML = quizStr;

        // answers area
        let ansNum = quizData[i].answers;
        let ansL = ansNum.length;
        let list = '<ul>';

        for (let j = 0; j < ansL; j++) {
          list += `<li><button class="answer-btn" name="answer" value="${j}">${ansNum[j]}</button></li>`;
        }
        list += '</ul>';
        
        progress.innerHTML = `Question ${[i + 1]} of 5`

        answersArea.innerHTML = list;

        let answerBtn = document.getElementsByClassName('answer-btn');
        newBtn = Array.from(answerBtn)

        newBtn.forEach(correctAns)

        return;
      }
    }


    Next.addEventListener('click', nextQuest)

    function nextQuest() {

      if (!document.querySelector('button').className.includes('disabled')){ //could this be simpler? took 26 min to complete
        alert('Please select an answer to move on!')
      } else {
        for (i; i < lquiz;) {
          i++
          console.log('question ran', i)
        if (i === lquiz){ // about 20 min to get this working 
        let scoreNum = document.getElementById('final-score')
        let Reset = document.getElementById('restart-btn')
        scoreContainer.classList.add('show')
        scoreNum.innerHTML = `Your score: ${score} / ${lquiz}`
        quizContainer.classList.add('hide')
        Reset.addEventListener('click', resetQuiz)
      }
      
          let quizQues = quizData[i].question;
          let quizStr = quizQues.toString();
          questionArea.innerHTML = quizStr;

          // answers area
          let ansNum = quizData[i].answers;
          let ansL = ansNum.length;
          let list = '<ul>';

          for (let j = 0; j < ansL; j++) {
            list += `<li><button class="answer-btn" name="answer" value="${j}">${ansNum[j]}</button></li>`;
          }
          list += '</ul>';


          answersArea.innerHTML = list;

                    if (i <= lquiz) {
            progress.innerHTML = `Question ${[i + 1]} of ${[lquiz]}`
          }

          let answerBtn = document.getElementsByClassName('answer-btn');
          newBtn = Array.from(answerBtn)
          newBtn.forEach(correctAns)
        
        break;
        }
      }

    };


    // 2. When user clicks an answer, check if it's correct - done
    function correctAns(btn) {
      btn.addEventListener('click', function () {

        for (i; i <= lquiz;) {
          let quizCorrect = quizData[i].correct;
          let questAns = quizCorrect.toString();
          console.log(`Answer to question ${i} is number ${questAns}`) 

          // answers area
          if (btn.value == questAns) {
            score = score + 1
            btn.classList.add('correct')
          } else {
            btn.classList.add('wrong')
          }
          
          newBtn.forEach(function(button) {
              if (button.value == questAns) {
            button.classList.add('correct')}

            button.disabled = true;
            button.classList.add('disabled')
          })

          break;

        }
      }
      )
    };



      function resetQuiz () {

        console.log('reset')
        i = 0
        while (i === 0) {
        quizContainer.classList.remove('hide')
        scoreContainer.classList.remove('show')
        
        let quizQues = quizData[i].question;
        let quizStr = quizQues.toString();
        questionArea.innerHTML = quizStr;

        // answers area
        let ansNum = quizData[i].answers;
        let ansL = ansNum.length;
        let list = '<ul>';

        for (let j = 0; j < ansL; j++) {
          list += `<li><button class="answer-btn" name="answer" value="${j}">${ansNum[j]}</button></li>`;
        }
        list += '</ul>';
        
        progress.innerHTML = `Question ${[i + 1]} of 5`

        answersArea.innerHTML = list;

        let answerBtn = document.getElementsByClassName('answer-btn');
        newBtn = Array.from(answerBtn)

        newBtn.forEach(correctAns)

        return;
    }
  };



    // to do
// Add reset button to do quiz again - thoughts - copy window func and make new one for reset button alone. 
  </script>
</body>

</html>